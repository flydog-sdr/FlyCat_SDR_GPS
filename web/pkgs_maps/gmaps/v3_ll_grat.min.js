var Graticule=function(){function t(t,e){this.sex_=e||!1,this.set("container",document.createElement("DIV")),this.show(),this.setMap(t)}function e(t){return t<.01?3:t<.1?2:t<1?1:0}t.prototype=new google.maps.OverlayView,t.prototype.addDiv=function(t){this.get("container").appendChild(t)},t.prototype.decToLonSex=function(t){var e=Math.floor(Math.abs(t)),i=(60*(Math.abs(t)-e)).toFixed(2);return"60.00"==i&&(e+=1,i="0.00"),[e,t>0?"E":"W",i].join("")},t.prototype.decToLatSex=function(t){var e=Math.floor(Math.abs(t)),i=(60*(Math.abs(t)-e)).toFixed(2);return"60.00"==i&&(e+=1,i="0.00"),[e,t>0?"N":"S",i].join("")},t.prototype.onAdd=function(){var t=this;function e(){t.draw()}this.getPanes().mapPane.appendChild(this.get("container")),this.idleHandler_=google.maps.event.addListener(this.getMap(),"idle",function(){t.draw()}),e(),this.typeHandler_=google.maps.event.addListener(this.getMap(),"maptypeid_changed",e)},t.prototype.clear=function(){for(var t=this.get("container");t.hasChildNodes();)t.removeChild(t.firstChild)},t.prototype.onRemove=function(){this.get("container").parentNode.removeChild(this.get("container")),this.set("container",null),google.maps.event.removeListener(this.idleHandler_),google.maps.event.removeListener(this.typeHandler_)},t.prototype.show=function(){this.get("container").style.visibility="visible"},t.prototype.hide=function(){this.get("container").style.visibility="hidden"};var i=10,n=[.06,.12,.3,.6,1.2,3,6,12,30,60,120,300,600,1200,1800],o=[.01,.02,.05,.1,.2,.5,1,3,6,12,30,60,120,300,600,1200,1800];function r(t,e,i){return t.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(e,i))}function a(t,e){return function(t,e,i){for(var n=0;n<e.length;n+=1)if(t<=e[n])return e[n];return i}(Math.ceil(t/i*6e3)/100,e,2700)/60}function s(t){return t.toString()+"px"}function h(t,e,i,n){var o=document.createElement("DIV"),r=o.style;return r.position="absolute",r.left=s(e),r.top=s(i),r.color=t,r.width="3em",r.fontSize="1.0em",r.whiteSpace="nowrap",o.innerHTML=n,o}function l(t,e,i,n,o){var r,a=document.createElement("DIV");return(r=a.style).position="absolute",r.overflow="hidden",r.backgroundColor=o,r.opacity=.3,(r=a.style).left=s(t),r.top=s(e),r.width=s(i),r.height=s(n),a}var d=5e4;function p(t,e){return l(t,-d,1,2*d,e)}function c(t,e){return l(-d,t,2*d,1,e)}function f(t,e,i){return i||(i=Math.pow(10,-6)),Math.abs(t-e)<i}return t.prototype.draw=function(){var t=function(t){var e=t.getMap().getMapTypeId(),i=google.maps.MapTypeId;if(e===i.HYBRID)return"#fff";if(e===i.ROADMAP)return"#000";if(e===i.SATELLITE)return"#fff";if(e===i.TERRAIN)return"#000";var n=t.getMap().mapTypes[e];return n.textColor?n.textColor:"#fff"}(this);if(this.clear(),"visible"==this.get("container").style.visibility){var i=this.getMap().getBounds();if(i){var s=i.getSouthWest(),l=i.getNorthEast(),d=s.lng(),u=s.lat(),v=l.lng(),g=l.lat();d==v&&(d=-180,v=180),g==u&&(u=-90,g=90);var y=this.sex_?o:n,m=a(g-u,y),M=a(v>d?v-d:180-d+(v+180),y);d=Math.floor(d/M)*M,u=Math.floor(u/m)*m,g=Math.ceil(g/m)*m,(v=Math.ceil(v/M)*M)==d&&(d+=M),v<d&&(v+=360);for(var x=d+2*M,L=r(this,u+2*m,d).y+2,w=d;w<v;w+=M){w>180&&(v-=360,w-=360);var b=r(this,u,w).x;this.addDiv(p(b,t));var T=f(w,x);this.addDiv(h(t,b+(T?17:3),L-(T?3:0),this.sex_?this.decToLonSex(w):w.toFixed(e(M))))}for(var D=u+2*m,S=r(this,u,d+2*M).x+3;u<=g;u+=m){var C=r(this,u,d).y;this.addDiv(c(C,t)),this.addDiv(h(t,S,C+(f(u,D)?7:2),this.sex_?this.decToLatSex(u):u.toFixed(e(m))))}}}},t}();